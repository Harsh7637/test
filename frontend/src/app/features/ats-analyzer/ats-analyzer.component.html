<div class="min-h-screen pt-24 pb-12 px-4">
  <div class="max-w-7xl mx-auto">
    <div class="text-center mb-12 animate-fade-in">
      <h1 class="text-5xl md:text-6xl font-bold mb-4 gradient-text">ATS Resume Analyzer</h1>
      <p class="text-xl text-gray-600">Get instant feedback and optimize for Applicant Tracking Systems</p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
      <!-- Input Section -->
      <div class="space-y-6">
        <div class="glass-card">
          <h2 class="text-2xl font-bold text-gray-800 mb-6">Your Resume</h2>
          <textarea [(ngModel)]="resumeText" rows="12" placeholder="Paste your resume text here..." class="textarea-field"></textarea>
        </div>

        <div class="glass-card">
          <h2 class="text-2xl font-bold text-gray-800 mb-6">Job Description</h2>
          <textarea [(ngModel)]="jobDescription" rows="12" placeholder="Paste the job description..." class="textarea-field"></textarea>
        </div>

        <button (click)="analyzeResume()" [disabled]="loading || !resumeText || !jobDescription" class="btn-primary w-full py-4 text-lg">
          <span *ngIf="!loading">Analyze Resume üéØ</span>
          <span *ngIf="loading" class="flex items-center justify-center">
            <svg class="spinner mr-3" viewBox="0 0 24 24">
              <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" fill="none"></circle>
              <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
            </svg>
            Analyzing...
          </span>
        </button>

        <div *ngIf="error" class="p-4 bg-red-50 border border-red-200 rounded-xl text-red-700">‚ùå {{error}}</div>
      </div>

      <!-- Results Section -->
      <div class="glass-card">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">Analysis Results</h2>
        
        <div *ngIf="!result && !loading" class="h-full flex items-center justify-center">
          <div class="text-center text-gray-400">
            <div class="text-6xl mb-4">üìä</div>
            <p class="text-lg">Your ATS analysis will appear here</p>
          </div>
        </div>

        <div *ngIf="loading" class="h-full flex items-center justify-center">
          <app-loader message="Analyzing your resume..."></app-loader>
        </div>

        <div *ngIf="result && !loading" class="space-y-6 animate-fade-in">
          <!-- ATS Score -->
          <div class="text-center mb-8">
            <div class="relative inline-block">
              <svg class="transform -rotate-90" width="200" height="200">
                <circle cx="100" cy="100" r="90" stroke="#e5e7eb" stroke-width="12" fill="none"></circle>
                <circle cx="100" cy="100" r="90" [attr.stroke]="getScoreColor(result.score)" stroke-width="12" fill="none" stroke-linecap="round" [attr.stroke-dasharray]="565.48" [attr.stroke-dashoffset]="565.48 - (565.48 * result.score / 100)" class="transition-all duration-1000"></circle>
              </svg>
              <div class="absolute inset-0 flex items-center justify-center">
                <div>
                  <div class="text-5xl font-bold" [style.color]="getScoreColor(result.score)">{{result.score}}</div>
                  <div class="text-sm text-gray-600 font-semibold">ATS SCORE</div>
                </div>
              </div>
            </div>
            <div class="mt-4">
              <span class="px-4 py-2 rounded-full text-sm font-semibold" [style.background-color]="getScoreColor(result.score) + '20'" [style.color]="getScoreColor(result.score)">
                {{getScoreLabel(result.score)}}
              </span>
            </div>
          </div>

          <!-- Sections -->
          <div class="bg-gray-50 rounded-xl p-6">
            <h3 class="font-bold text-gray-800 mb-4 flex items-center"><span class="text-xl mr-2">üìã</span>Resume Sections</h3>
            <div class="space-y-2">
              <div *ngFor="let section of getSections(result.section_analysis)" class="flex items-center justify-between p-3 bg-white rounded-lg">
                <span class="capitalize font-medium">{{section.key}}</span>
                <span *ngIf="section.value" class="text-green-600 flex items-center">‚úì Found</span>
                <span *ngIf="!section.value" class="text-red-600 flex items-center">‚úï Missing</span>
              </div>
            </div>
          </div>

          <!-- Keywords -->
          <div class="bg-green-50 rounded-xl p-6">
            <h3 class="font-bold text-green-900 mb-3 flex items-center"><span class="text-xl mr-2">‚úÖ</span>Matched Keywords ({{result.matched_keywords.length}})</h3>
            <div class="flex flex-wrap gap-2">
              <span *ngFor="let keyword of result.matched_keywords.slice(0, 15)" class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium">
                {{keyword}}
              </span>
            </div>
          </div>

          <div class="bg-orange-50 rounded-xl p-6">
            <h3 class="font-bold text-orange-900 mb-3 flex items-center"><span class="text-xl mr-2">‚ö†Ô∏è</span>Missing Keywords ({{result.missing_keywords.length}})</h3>
            <div class="flex flex-wrap gap-2">
              <span *ngFor="let keyword of result.missing_keywords.slice(0, 15)" class="px-3 py-1 bg-orange-100 text-orange-800 rounded-full text-sm font-medium">
                {{keyword}}
              </span>
            </div>
          </div>

          <!-- Suggestions -->
          <div class="bg-blue-50 rounded-xl p-6">
            <h3 class="font-bold text-blue-900 mb-4 flex items-center"><span class="text-xl mr-2">üí°</span>Improvement Suggestions</h3>
            <ul class="space-y-3">
              <li *ngFor="let suggestion of result.suggestions" class="flex items-start p-3 bg-white rounded-lg">
                <span class="text-blue-600 mr-2 mt-0.5">‚Ä¢</span>
                <span class="text-sm text-gray-700">{{suggestion}}</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>